(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{424:function(a,s,t){"use strict";t.r(s);var n=t(20),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"连续赋值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连续赋值"}},[a._v("#")]),a._v(" 连续赋值")]),a._v(" "),t("p",[a._v("思考一个问题，以下代码，会输出什么")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" b "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\na"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("假设将上述代码改为")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" b "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("那么问题会简单很多，答案是 a、b 都是 1")]),a._v(" "),t("p",[a._v("可是如果 a 是一个引用类型呢，这个时候赋值运算是怎么处理的")]),a._v(" "),t("h2",{attrs:{id:"赋值运算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#赋值运算"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Assignment_Operators",target:"_blank",rel:"noopener noreferrer"}},[a._v("赋值运算"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("基本的赋值运算符是等号（=），"),t("strong",[a._v("该运算符把它右边的运算值赋给左边")]),a._v("。即，"),t("code",[a._v("x = y")]),a._v(" 把 "),t("code",[a._v("y")]),a._v(" 的值赋给 "),t("code",[a._v("x")])]),a._v(" "),t("p",[a._v("那么 对于 "),t("code",[a._v("a = b = 1")]),a._v("，就是 把 1 赋值给 b ，然后再把 b 赋值给 a ，在这个过程中 1 只使用了一次，就是赋值给 b 的时候")]),a._v(" "),t("p",[a._v("我们接着来分析一开始的例子")]),a._v(" "),t("ol",[t("li",[a._v("首先 定义 a, 并且在堆内存中开辟一个空间 ，创建一个新对象 {n: 1} 将一个对象 {n: 1} 的地址赋值给 a")]),a._v(" "),t("li",[a._v("定义 b ， 将 a 的引用地址 赋值给 b")]),a._v(" "),t("li",[t("code",[a._v("a.x = a = {n: 2}")]),a._v(" "),t("ul",[t("li",[a._v("首先取 a.x ，但是 a.x 并不存在，所以 js 在堆内存中新增一个 x ，值为 undefined")]),a._v(" "),t("li",[a._v("然后 将 a 的指针指向了 {n: 2} 的堆内存空间，此时 a 已经不在使用之前的堆内存了，而是一个新的堆内存，原来的只有 b 在使用")]),a._v(" "),t("li",[a._v("然后 再将 a 指向的堆内存，赋值给 刚刚新增的 x")]),a._v(" "),t("li",[a._v("此时 a = {n: 2} , b = {n: 1, x: {n: 2}}")])])]),a._v(" "),t("li",[a._v("在调用 a.x 时，因为 a 为对象，所以 x 的初始值为 undefined")])]),a._v(" "),t("h3",{attrs:{id:"关键点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关键点"}},[a._v("#")]),a._v(" 关键点")]),a._v(" "),t("ol",[t("li",[a._v("对象中，不存在的属性，值为 undefined")]),a._v(" "),t("li",[a._v("对象的成员在等待赋值的时候，锁定的是成员，而不是对象")]),a._v(" "),t("li",[a._v("对象重新赋值时，并不是更改之前的堆内存，而是会重新开辟一片内存空间赋值，会更改栈中的指针指向，之前的内存空间，如果还有栈的指针指向它，则不会消失。（对应例子，就是 b 还指向之前的内存空间）")])]),a._v(" "),t("h3",{attrs:{id:"答案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#答案"}},[a._v("#")]),a._v(" 答案")]),a._v(" "),t("p",[a._v("所以，最终答案为")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("b "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" x"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\na "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\na"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("===")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("undefined")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);